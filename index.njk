---
layout: base.njk
title: German Learning Portal - Layer 3
---

<h1>{{ title }}</h1>

{% include "color-key.njk" %}

<div class="navigation">
    <button id="prevBtn">← Previous</button>
    <span id="lesson-counter"></span>
    <button id="nextBtn">Next →</button>
</div>

<div id="current-lesson">Loading...</div>

<script>
    let allLessons = [];
    let currentLessonIndex = 0;

    // Load lessons data from the 11ty generated data
    async function initialize() {
        try {
            // In 11ty, we can access the data directly
            allLessons = {{ lessons.lessons | dump | safe }};
            displayCurrentLesson();
        } catch (error) {
            console.error('Error loading lessons:', error);
            document.getElementById('current-lesson').innerHTML = '<h2>Error loading lessons. Please try again later.</h2>';
        }
    }

    function showNextLesson() {
        if (currentLessonIndex < allLessons.length - 1) {
            currentLessonIndex++;
            displayCurrentLesson();
        }
    }

    function showPreviousLesson() {
        if (currentLessonIndex > 0) {
            currentLessonIndex--;
            displayCurrentLesson();
        }
    }

    function displayCurrentLesson() {
        const lesson = allLessons[currentLessonIndex];
        const container = document.getElementById('current-lesson');
        
        container.innerHTML = `
            <div class="lesson">
                <h2>${lesson.title}</h2>
                <h3>German Text (Color Coded):</h3>
                <p class="german-paragraph">${lesson.germanTextHTML}</p>
                <h3>English Translation:</h3>
                <p>${lesson.englishText}</p>
                <h3>Key Vocabulary:</h3>
                ${lesson.vocabularyHTML}
                <h3>German Grammar Focus:</h3>
                ${lesson.grammarFocusHTML}
            </div>
        `;
        
        updateNavigationUI();
    }

    function updateNavigationUI() {
        document.getElementById('lesson-counter').textContent = `Lesson ${currentLessonIndex + 1} of ${allLessons.length}`;
        document.getElementById('prevBtn').disabled = currentLessonIndex === 0;
        document.getElementById('nextBtn').disabled = currentLessonIndex === allLessons.length - 1;
    }

    // Event listeners
    document.getElementById('prevBtn').addEventListener('click', showPreviousLesson);
    document.getElementById('nextBtn').addEventListener('click', showNextLesson);

    // Initialize when page loads
    initialize();
</script>